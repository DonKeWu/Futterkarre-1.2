#!/bin/bash
# ğŸš¨ ESP8266 Access Point Problem - er lÃ¤uft, aber nicht im richtigen Netzwerk!

echo "ğŸ”¥ ESP8266 ACCESS POINT PROBLEM LÃ–SEN"
echo "====================================="
echo ""
echo "ğŸ¯ SYMPTOM: ESP8266 Web-UI lÃ¤uft, aber Pi5 findet ihn nicht!"
echo "ğŸ“Š HX711-Daten sind da â†’ ESP8266 Hardware OK"
echo "âŒ WiFi Station-Modus failed â†’ ESP8266 lÃ¤uft als Access Point"
echo ""

echo "ğŸ” DIAGNOSE:"
echo "-----------"
echo "ESP8266 ist vermutlich erreichbar unter:"
echo "ğŸŒ Access Point: http://192.168.4.1/"
echo "ğŸ“± WiFi-Netz: 'ESP8266-HX711' oder Ã¤hnlich"
echo ""

echo "ğŸ’¡ SOFORT-FIX 1: Access Point finden"
echo "-----------------------------------"
echo "1. Mit Handy/Laptop WiFi-Netze scannen"
echo "2. Suche nach: 'ESP8266', 'NodeMCU', 'ESP_XXXXXX'"
echo "3. Verbinde dich damit (meist kein Passwort)"
echo "4. Browser: http://192.168.4.1/"
echo "5. WiFi-Konfiguration eingeben!"
echo ""

echo "ğŸ’¡ SOFORT-FIX 2: Serial Monitor"
echo "------------------------------"
echo "Arduino IDE Serial Monitor (115200 baud):"
echo "1. ESP8266 Reset drÃ¼cken"
echo "2. Suche nach Meldungen:"
echo "   'WiFi connection failed'"
echo "   'Starting Access Point'"
echo "   'AP IP: 192.168.4.1'"
echo ""

echo "ğŸ› ï¸  LÃ–SUNG: WiFi-Credentials korrigieren"
echo "---------------------------------------"
echo "Im Arduino-Code (esp8266_dual_hx711_simple.ino):"
echo ""
echo "const char* ssid = \"IHR_WIFI_NAME\";"
echo "const char* password = \"IHR_WIFI_PASSWORT\";"
echo ""
echo "HÃ„UFIGE FEHLER:"
echo "âŒ Falscher WiFi-Name (SSID)"
echo "âŒ Falsches Passwort" 
echo "âŒ 5GHz statt 2.4GHz"
echo "âŒ WPA3 statt WPA2"
echo ""

echo "âš¡ QUICK-TEST mit Handy-Hotspot:"
echo "------------------------------"
echo "1. Handy-Hotspot aktivieren: Name='TEST', Passwort='12345678'"
echo "2. Arduino-Code Ã¤ndern:"
echo '   const char* ssid = "TEST";'
echo '   const char* password = "12345678";'
echo "3. ESP8266 flashen"
echo "4. Sollte sich verbinden und 192.168.2.20 bekommen"
echo ""

echo "ğŸ¯ ERFOLG-KRITERIUM:"
echo "==================="
echo "Serial Monitor zeigt:"
echo "âœ… 'WiFi connected'"
echo "âœ… 'IP address: 192.168.2.20'"
echo "âœ… 'Static IP configured'"
echo ""

echo "ğŸ“± WiFi-Netze scannen:"
iwconfig 2>/dev/null | grep ESSID || echo "Kein iwconfig verfÃ¼gbar"
echo ""
echo "ğŸ” Suche ESP8266 Access Point mit Handy/Laptop!"